!function(){"use strict"
  function o(o,e,n,a,r){function t(){S.login={username:"",password:""}}function s(){S.signup={username:"",password1:"",password2:"",firstname:"",lastname:""}}function i(o){if(!r.cookie.isSupported)return humane.log("You need javascript and cookies enabled",{addCls:"humane-flatty-info"}),void n.go("login")
    if(0===o.username.trim().length)return void humane.log("Enter a username",{addCls:"humane-flatty-info"})
    if(0===o.password.trim().length)return void humane.log("Enter a password",{addCls:"humane-flatty-info"})
    var e={username:o.username.trim().toLocaleLowerCase(),password:o.password}
    a.sendPost(e,ROUTE.LOGIN,ROUTE.LOGIN_SUCCESS,ROUTE.LOGIN_FAIL)}function m(o){if(!o)return void humane.log("You need to enter a username",{addCls:"humane-flatty-info"})
    if(!o.username||0===o.username.trim().length)return void humane.log("You need to enter a username",{addCls:"humane-flatty-info"})
    if(!o.password1||0===o.password1.trim().length)return void humane.log("You need to enter a password",{addCls:"humane-flatty-info"})
    if(!o.password2||0===o.password2.trim().length)return void humane.log("You need to confirm the password",{addCls:"humane-flatty-info"})
    if(!o.firstname||0===o.firstname.trim().length)return void humane.log("You need to enter your First Name",{addCls:"humane-flatty-info"})
    if(!o.lastname||0===o.lastname.trim().length)return void humane.log("You need to enter your Last Name",{addCls:"humane-flatty-info"})
    if(o.password1!=o.password2)return void humane.log("Your passwords don't match!",{addCls:"humane-flatty-info"})
    var e={username:o.username.trim().toLocaleLowerCase(),password:o.password1,name:o.firstname,lastname:o.lastname}
    a.sendPost(e,ROUTE.SIGNUP,ROUTE.SIGNUP_SUCCESS,ROUTE.SIGNUP_FAIL)}function d(o){if(!o.username||0===o.username.trim().length)return humane.log("You need to enter a username",{addCls:"humane-flatty-info"}),void console.log("No username content")
    var e={username:o.username}
    a.sendPost(e,ROUTE.FORGOT,ROUTE.FORGOT_SUCCESS,ROUTE.FORGOT_FAIL)}function u(){t(),s(),f()}function l(){t(),s(),c()}function g(){console.log("forgot password"),h()}function f(){S.modeLogIn=!0,S.modeSignUp=!1,S.modeForgotPW=!1,S.modeForgotConfirm=!1,S.modeVerifyEmail=!1}function c(){S.modeLogIn=!1,S.modeSignUp=!0,S.modeForgotPW=!1,S.modeVerifyEmail=!1,S.modeForgotConfirm=!1}function h(){S.modeLogIn=!1,S.modeSignUp=!1,S.modeForgotPW=!0,S.modeVerifyEmail=!1,S.modeForgotConfirm=!1}function p(){S.modeLogIn=!1,S.modeSignUp=!1,S.modeForgotPW=!1,S.modeVerifyEmail=!1,S.modeForgotConfirm=!0}function C(){S.modeLogIn=!1,S.modeSignUp=!1,S.modeForgotPW=!1,S.modeForgotConfirm=!1,S.modeVerifyEmail=!0}var S=this
    r.set("cse136team10"),f(),e.$broadcast("hide-nav"),S.modeLogIn=!0,S.modeSignUp=!1,S.modeForgotPW=!1,S.modeForgotConfirm=!1,S.modeVerifyEmail=!1,S.submitLogin=i,S.goToSignUp=l,S.goToLogIn=u,S.goToForgotPW=g,S.submitForgotPW=d,S.submitSignUp=m,S.forgot={username:""},S.login={username:"",password:""},S.signup={username:"",password1:"",password2:"",firstname:"",lastname:""},document.onkeydown=function(o){13===o.keyCode&&(S.modeLogIn?S.submitLogin(S.login):S.submitSignUp(S.signup))},r.clearAll(),o.$on(ROUTE.FORGOT_SUCCESS,function(o,e){return console.log(o),console.log("msg: "+e.msg),console.log("data"),console.log(e),"Couldn't find user"===e.msg?void humane.log("No account found for these credentials",{addCls:"humane-flatty-log"}):void p()}),o.$on(ROUTE.LOGIN_SUCCESS,function(o,a){if("Couldn't find one user"===a.msg)return void humane.log("No account found for these credentials",{addCls:"humane-flatty-log"})
      if(r.cookie.clearAll(),a.success){if(r.isSupported){var t=r.get("username")
        t!=a.user.username&&r.clearAll(),r.set("username",a.user.username)}r.cookie.set("username",a.user.username),e.$broadcast("show-nav"),n.go("dashboard")}}),o.$on(ROUTE.LOGIN_FAIL,function(o,e){humane.log("Error logging in, try again",{addCls:"humane-flatty-error"})}),o.$on(ROUTE.SIGNUP_SUCCESS,function(o,e){return console.log("msg: "+e.msg),"This username is taken"===e.msg?void humane.log("This username is taken",{addCls:"humane-flatty-log"}):void C()}),o.$on(ROUTE.SIGNUP_FAIL,function(o,e){})}angular.module("app").controller("LogInController",o),o.$inject=["$scope","$rootScope","$state","ServerService","localStorageService"]}()
